# =============================================================================
# Server (Express) configuration
# =============================================================================

# Node environment: development | test | production
NODE_ENV=development

# App basics
APP_NAME=MyApp
APP_URL=http://localhost:3000
HOST=0.0.0.0
PORT=4000

# Trust reverse proxy (e.g., when behind Nginx/Heroku). 0=false, 1=true, or a number of hops
TRUST_PROXY=1

# Force HTTPS redirect in production (0=false, 1=true)
ENABLE_HTTPS_REDIRECT=0

# =============================================================================
# CORS / Security
# =============================================================================

# Comma-separated list of allowed origins for CORS
# Example: http://localhost:5173,https://myapp.com
CORS_ALLOWED_ORIGINS=http://localhost:5173

# Allowed HTTP headers for CORS (comma-separated)
CORS_ALLOWED_HEADERS=Content-Type,Authorization

# Allowed HTTP methods for CORS (comma-separated)
CORS_ALLOWED_METHODS=GET,POST,PUT,PATCH,DELETE,OPTIONS

# Whether to allow sending credentials (cookies/authorization headers) in CORS requests (0=false, 1=true)
CORS_ALLOW_CREDENTIALS=1

# =============================================================================
# Logging
# =============================================================================

# Log level: error | warn | info | http | verbose | debug | silly
LOG_LEVEL=info

# JSON log output (0=false, 1=true)
LOG_JSON=1

# =============================================================================
# Rate limiting / Throttling
# =============================================================================

# Rate limit window in milliseconds
RATE_LIMIT_WINDOW_MS=60000

# Max number of requests per window per IP
RATE_LIMIT_MAX=100

# =============================================================================
# Sessions / Cookies
# =============================================================================

# Strong, random secret for signing session IDs and cookies
SESSION_SECRET=changeme-session-secret

# Cookie settings
COOKIE_NAME=sid
COOKIE_SECURE=0
COOKIE_SAME_SITE=lax
# Set cookie domain if needed, e.g., .example.com; leave empty to omit
COOKIE_DOMAIN=

# =============================================================================
# JWT Authentication
# =============================================================================

# Use strong, random secrets for each token type
JWT_ACCESS_TOKEN_SECRET=changeme-access-secret
JWT_ACCESS_TOKEN_EXPIRES_IN=15m

JWT_REFRESH_TOKEN_SECRET=changeme-refresh-secret
JWT_REFRESH_TOKEN_EXPIRES_IN=30d

# =============================================================================
# Database (PostgreSQL recommended)
# =============================================================================

# Full connection string; example:
# postgres://USER:PASSWORD@HOST:PORT/DB_NAME
DATABASE_URL=postgres://postgres:postgres@localhost:5432/myapp

# Optional: schema name; default is "public"
DATABASE_SCHEMA=public

# Enforce SSL for production connections (0=false, 1=true)
DB_SSL=0

# Connection pool tuning
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_POOL_IDLE_TIMEOUT_MS=10000

# =============================================================================
# Redis (Caching, rate limit stores, queues)
# =============================================================================

# Example: redis://:password@localhost:6379/0
REDIS_URL=redis://localhost:6379/0

# =============================================================================
# Email (SMTP)
# =============================================================================

SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_USER=
SMTP_PASSWORD=
# 1 for TLS over SMTP (port 465), 0 otherwise (STARTTLS typically on 587)
SMTP_SECURE=0
SMTP_FROM="MyApp <no-reply@localhost>"

# =============================================================================
# File Storage / CDN (AWS S3 as example)
# =============================================================================

AWS_REGION=us-east-1
AWS_S3_BUCKET=myapp-bucket
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
# Public CDN/base URL for assets (optional). Example: https://cdn.myapp.com
ASSET_CDN_URL=

# =============================================================================
# Error Tracking / Observability
# =============================================================================

SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# =============================================================================
# Third-party Integrations
# =============================================================================

# OAuth - Google
OAUTH_GOOGLE_CLIENT_ID=
OAUTH_GOOGLE_CLIENT_SECRET=
OAUTH_GOOGLE_REDIRECT_URI=http://localhost:4000/auth/google/callback

# OAuth - GitHub
OAUTH_GITHUB_CLIENT_ID=
OAUTH_GITHUB_CLIENT_SECRET=
OAUTH_GITHUB_REDIRECT_URI=http://localhost:4000/auth/github/callback

# Payments - Stripe
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=

# =============================================================================
# Real-time / WebSockets
# =============================================================================

ENABLE_WEBSOCKETS=1

# =============================================================================
# Timezone / Locale
# =============================================================================

# Container/Process timezone
TZ=UTC

# =============================================================================
# Frontend (React) - Vite-style variables (must start with VITE_)
# =============================================================================

# Where the frontend should call the API
VITE_API_BASE_URL=http://localhost:4000

# App display name
VITE_APP_NAME=MyApp

# Enable MSW or other mocks in development (0=false, 1=true)
VITE_ENABLE_MOCKS=1

# Optional: error tracking for frontend
VITE_SENTRY_DSN=

# Feature flags (example toggles)
VITE_FEATURE_SIGNUP=1
VITE_FEATURE_BILLING=0
VITE_FEATURE_REALTIME=1

# Public CDN for frontend assets (optional)
VITE_ASSET_CDN_URL=